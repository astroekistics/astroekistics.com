<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <title>Institute of Astro-ekistics — Sustainable Systems for Human Settlement</title>

    <!-- Primary SEO -->
    <meta
      name="description"
      content="We design closed-loop, regenerative systems that enable self-sufficient life in space — and deliver practical resilience here on Earth."
    />
    <link rel="canonical" href="https://astroekistics.com/" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://astroekistics.com/" />
    <meta
      property="og:title"
      content="Institute of Astro-ekistics — Sustainable Systems for Human Settlement"
    />
    <meta
      property="og:description"
      content="Closed-loop, regenerative systems for self-sufficient life in space and practical resilience on Earth."
    />
    <meta property="og:image" content="logo.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@astroekistics" />
    <meta
      name="twitter:title"
      content="Institute of Astro-ekistics — Sustainable Systems for Human Settlement"
    />
    <meta
      name="twitter:description"
      content="Closed-loop, regenerative systems for self-sufficient life in space and practical resilience on Earth."
    />
    <meta name="twitter:image" content="logo.png" />

    <!-- Basic PWA-ish niceties -->
    <meta name="theme-color" content="#0b1222" />
    <link rel="icon" href="logo.png" />

    <!-- JSON-LD (Organization + Website) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Institute of Astro-ekistics",
      "url": "https://astroekistics.com/",
      "logo": "https://astroekistics.com/logo.png",
      "sameAs": []
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Institute of Astro-ekistics",
      "url": "https://astroekistics.com/"
    }
    </script>

    <!-- React + Babel (CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
      /* ===== Design System ===== */
      :root{
        --bg-1:#0b1222; --bg-2:#050914; --bg-3:#04070f;
        --card:#0f172a;
        --card-glass: rgba(15,23,42,.55);
        --border: rgba(148,163,184,.18);
        --ink:#e5ecff; --muted:#cbd5e1;
        --accent-1:#60a5fa; --accent-2:#a78bfa; --accent-3:#22d3ee;
        --shadow: 0 10px 30px rgba(0,0,0,.35);
        --radius: 16px;
        --maxw: 1100px;
      }
      html, body { height:100%; }
      body {
        margin:0; color:var(--ink);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
        background:radial-gradient(1200px 600px at 10% 10%, var(--bg-1) 0%, var(--bg-2) 55%, var(--bg-3) 100%);
        overflow-x:hidden;
      }

      /* Starfield canvas behind content */
      #starfield { position: fixed; inset:0; width:100%; height:100%; z-index:0; pointer-events:none; display:block; }

      .wrap { position:relative; z-index:1; min-height:100vh; display:grid; grid-template-rows:auto 1fr auto; }
      .container { width:100%; max-width:var(--maxw); margin:0 auto; padding:28px 24px; }

      /* ===== Header / Hero ===== */
      header { padding-top:8px; padding-bottom:8px; }
      .brand { display:flex; align-items:center; gap:14px; }
      .logo { width:44px; height:44px; object-fit:contain; filter:invert(1) hue-rotate(180deg); opacity:.95 }
      .title { font-size:1.05rem; font-weight:700; letter-spacing:.02em; opacity:.9 }
      .hero {
        margin-top:18px; margin-bottom:26px; position:relative; overflow:hidden;
        border:1px solid var(--border); border-radius:calc(var(--radius) + 4px);
        background: linear-gradient(180deg, rgba(17,24,39,.75) 0%, rgba(2,6,23,.55) 100%);
        box-shadow: var(--shadow);
      }
      .hero-inner { padding:40px 28px; display:grid; grid-template-columns: 1.1fr .9fr; align-items:center; gap:24px; }
      .kicker { font-size:.85rem; letter-spacing:.12em; color:var(--muted); text-transform:uppercase }
      h1.hero-h {
        margin:.1rem 0 .6rem; font-weight:900; line-height:1.08;
        font-size: clamp(1.8rem, 2.8vw + 1rem, 2.8rem);
        background: linear-gradient(90deg, var(--ink) 0%, #dbeafe 50%, #e9d5ff 100%);
        -webkit-background-clip:text; background-clip:text; color:transparent;
      }
      .hero-p { margin:0; color:#dbeafe; opacity:.95; font-size:1.05rem }
      .hero-badge {
        justify-self:end; border:1px solid var(--border); border-radius:calc(var(--radius) + 2px);
        padding:20px; background:linear-gradient(180deg, rgba(30,41,59,.55), rgba(2,6,23,.35));
      }

      /* ===== Cards / Sections ===== */
      .sections { display:grid; gap:18px; }
      .card {
        background:var(--card-glass); border:1px solid var(--border); border-radius:var(--radius);
        box-shadow:var(--shadow); padding:20px;
      }
      .card h2 { margin:0 0 8px; font-weight:900; letter-spacing:.01em; font-size:1.25rem }
      .subtle { color:var(--muted); margin-top:4px; margin-bottom:16px; font-size:.95rem }
      .columns { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
      .bullets { margin:0; padding-left:18px; display:grid; gap:8px; }
      .bullets li { line-height:1.45 }

      /* ===== Badge ===== */
      .badge-ring { position:relative; width:200px; height:200px; margin:8px auto 10px; }
      .badge-ring svg { position:absolute; inset:0; }
      .badge-logo { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:96px; filter:invert(1) hue-rotate(180deg); opacity:.95 }
      .badge-text { text-align:center }
      .badge-text .pct { font-weight:900; letter-spacing:.06em; font-size:1rem }
      .badge-text .label { opacity:.9; font-size:.95rem }

      /* ===== Timeline ===== */
      .timeline { position:relative; margin-top:8px; }
      .timeline::before {
        content:""; position:absolute; left:14px; top:0; bottom:0; width:2px;
        background:linear-gradient(180deg, rgba(96,165,250,.6), rgba(167,139,250,.6));
        filter:blur(.15px);
      }
      .titem { position:relative; padding-left:42px; margin:16px 0; }
      .titem::before{
        content:""; position:absolute; left:8px; top:.2rem; width:12px; height:12px; border-radius:999px;
        background: radial-gradient(circle at 30% 30%, #fff, #a78bfa 60%, #60a5fa 100%);
        box-shadow: 0 0 12px rgba(99,102,241,.6);
      }
      .titem h3 { margin:.1rem 0 .2rem; font-size:1rem; font-weight:800 }
      .titem p { margin:0; color:var(--muted) }

      footer { text-align:center; opacity:.75; font-size:.9rem; padding:20px 0 30px }

      @media (max-width: 900px){
        .hero-inner{ grid-template-columns:1fr; }
        .hero-badge{ justify-self:stretch }
      }
      @media (max-width: 720px){
        .columns { grid-template-columns:1fr; }
      }
      /* Partners grid (no fancy JS features needed) */
      .partner-grid { 
        display:grid; gap:14px; 
        grid-template-columns: repeat( auto-fill, minmax(160px, 1fr) );
      }
      .partner-card {
        border:1px solid var(--border);
        border-radius:12px;
        background: rgba(15,23,42,.45);
        padding:14px;
        display:grid; gap:10px;
        align-content:start;
        transition: transform .12s ease, box-shadow .12s ease;
      }
      .partner-card:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
      .partner-logo-wrap {
        width:100%; aspect-ratio: 4/3; 
        display:grid; place-items:center;
        background: rgba(148,163,184,.08);
        border-radius:10px;
        overflow:hidden;
      }
      .partner-logo { max-width: 90%; max-height: 80%; object-fit: contain; }
      .partner-fallback {
        font-weight:800; font-size:1.1rem; opacity:.85;
        display:grid; place-items:center; width:100%; height:100%;
      }
      .partner-meta {
        display:flex; align-items:center; justify-content:space-between; gap:8px;
        min-height: 28px;
      }
      .partner-name { font-size:.95rem; font-weight:700; line-height:1.2; }
      .partner-pct {
        font-size:.8rem; padding:.15rem .45rem; border-radius:999px;
        border:1px solid var(--border); opacity:.9;
      }

    </style>
  </head>
  <body>
    <canvas id="starfield" aria-hidden="true"></canvas>
    <div id="root" class="wrap"></div>

    <script type="text/babel">
      /* ========= UI Bits ========= */
      function GradientRule({mt=10, mb=14}) {
        return (
          <div style={{
            marginTop:mt, marginBottom:mb, height:1, width:'100%',
            background:'linear-gradient(90deg, rgba(96,165,250,.35), rgba(167,139,250,.35))'
          }}/>
        );
      }

      function PledgeRing({ pct=100, size=200, stroke=14 }) {
        const r=(size-stroke)/2; const cx=size/2, cy=size/2; const C=2*Math.PI*r;
        const p=Math.max(0,Math.min(100,Number(pct)||0));
        const dashOffset=C-(p/100)*C;
        const pForAngle=p===100?99.999:p; const angle=(pForAngle/100)*2*Math.PI-Math.PI/2;
        const mx=cx+r*Math.cos(angle); const my=cy+r*Math.sin(angle);
        return (<svg width={size} height={size} viewBox={`0 0 ${size} ${size}`} role="img" aria-label={`${p}% commitment`}>
          <defs>
            <linearGradient id="ring" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor="#60a5fa"/><stop offset="100%" stopColor="#a78bfa"/>
            </linearGradient>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
              <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <circle cx={cx} cy={cy} r={r} fill="none" stroke="rgba(148,163,184,0.22)" strokeWidth={stroke}/>
          <circle cx={cx} cy={cy} r={r} fill="none" stroke="url(#ring)" strokeWidth={stroke} strokeLinecap="round"
                  strokeDasharray={C} strokeDashoffset={dashOffset} transform={`rotate(-90 ${cx} ${cy})`} filter="url(#glow)"/>
          <circle cx={mx} cy={my} r={stroke/2.4} fill="#a78bfa" stroke="#0b1222" strokeWidth="2"/>
        </svg>);
      }

      function PartnerBadge({ pct=100 }) {
        const p = Math.max(0, Math.min(100, Number(pct) || 0));
        return (
          <div aria-label="Patron Seal of Astro-ekistics" className="badge-text">
            <div className="badge-ring">
              <PledgeRing pct={p}/>
              <img 
                src="logo.png" 
                alt="Institute logo" 
                className="badge-logo" 
                style={{ width: "166px" }}  // increased from 96px → 120px
              />
            </div>
            <div className="pct">{p}% COMMITTED</div>
            <div className="label">Patron Seal of Astro-ekistics</div>
          </div>
        );
      }

      /* ========= Content ========= */
      const MISSION = [
        "Advance regenerative, closed-loop life-support systems for human settlement beyond Earth.",
        "Apply space-grade efficiency to strengthen ecological resilience on Earth.",
        "Publish all research openly to ensure discoveries remain collaborative, verifiable, and reusable."
      ];

      const VISION = [
        "Space as the ultimate laboratory for sustainability and resilience.",
        "Knowledge that is open, transparent, and accessible to all.",
        "Human settlements designed to be ecologically integrated and energy-efficient from the start."
      ];


      function TimelineItem({title, children}) {
        return (
          <div className="titem">
            <h3>{title}</h3>
            <p>{children}</p>
          </div>
        );
      }
      /* ===== Partners (no fetch, ES5-safe) ===== */
      const PARTNERS = [
        { name: "You", url: "", logo: "https://upload.wikimedia.org/wikipedia/commons/1/1b/Icon_circle_MagnifyingGlassQuestionMark_white.svg", pct: 100 }
      ];

      function initialsOf(name){
        if(!name) return "";
        var parts = String(name).replace(/^\s+|\s+$/g,"").split(/\s+/).slice(0,2);
        for (var i=0;i<parts.length;i++){
          parts[i] = parts[i] && parts[i].charAt(0) ? parts[i].charAt(0).toUpperCase() : "";
        }
        return parts.join("");
      }

      function PartnerLogo(props){
        var name = props.name, src = props.src;
        var _ref = React.useRef(null);
        var _failed = React.useRef(false);

        React.useEffect(function(){
          // if image failed earlier and React re-rendered, show fallback
          if(_failed.current && _ref.current){
            _ref.current.innerHTML = '<div class="partner-fallback">' + initialsOf(name) + '</div>';
          }
        });

        function onErr(e){
          _failed.current = true;
          if(_ref.current){
            _ref.current.innerHTML = '<div class="partner-fallback">' + initialsOf(name) + '</div>';
          }
        }

        return (
          <div className="partner-logo-wrap" ref={_ref}>
            <img className="partner-logo" src={src} alt={name + " logo"} onError={onErr}/>
          </div>
        );
      }

      function PartnerGrid(){
        return (
          <div className="partner-grid">
            {PARTNERS.map(function(p, i){
              var hasPct = typeof p.pct === "number" && isFinite(p.pct);
              return (
                <a
                  key={p.name + i}
                  className="partner-card"
                  href={p.url || "#"}
                  target="_blank"
                  rel="noopener noreferrer"
                  aria-label={p.name + (hasPct ? (" — " + p.pct + "% committed") : "")}
                  title={p.name}
                >
                  <PartnerLogo name={p.name} src={p.logo} />
                  <div className="partner-meta">
                    <div className="partner-name">{p.name}</div>
                    {hasPct ? (
                      <div className="partner-pct">{p.pct}%</div>
                    ) : (
                      <div style={{opacity:.6, fontSize:".8rem"}}>Partner</div>
                    )}
                  </div>
                </a>
              );
            })}
          </div>
        );
      }


      function App(){
        const params=new URLSearchParams(window.location.search);
        const pctParam=parseFloat(params.get('pct'));
        const pct=Number.isFinite(pctParam)?Math.max(0,Math.min(100,pctParam)):100;

        return (
          <div className="wrap">
            <div className="container">
              <header aria-label="Site header">
                <div className="brand">
                  <img className="logo" src="logo.png" alt="Institute of Astro-ekistics logo" />
                  <div className="title">The Institute of Astro-ekistics</div>
                </div>
                <section className="hero" aria-label="Hero">
                  <div className="hero-inner">
                      <div>
                        <div className="kicker">Designing for life beyond Earth</div>
                        <h1 className="hero-h">
                          Building Sustainable Systems<br/>for Human Settlement
                        </h1>
                        <p className="hero-p" style={{fontSize:"1.2rem", lineHeight:"1.5", maxWidth:"40ch", marginTop:"14px"}}>
                          A foundation for life that endures —<br/>
                          on Earth and at the frontier.
                        </p>
                        <GradientRule mt={28} mb={0}/>
                      </div>

                    <div className="hero-badge">
                      <PartnerBadge pct={pct}/>
                    </div>
                  </div>
                </section>
              </header>

              <main className="sections">
                <section className="card" aria-labelledby="mv">
                  <h2 id="mv">Mission & Vision</h2>
                  <p className="subtle">Clarity of purpose, openness of method.</p>
                  <div className="columns">
                    <div>
                      <h3>Mission</h3>
                      <ul className="bullets">{MISSION.map(m=><li key={m}>{m}</li>)}</ul>
                    </div>
                    <div>
                      <h3>Vision</h3>
                      <ul className="bullets">{VISION.map(v=><li key={v}>{v}</li>)}</ul>
                    </div>
                  </div>
                </section>

                <section className="card" aria-labelledby="journal">
                  <h2 id="journal">Astro-ekistics</h2>
                  <p>
                    <em>Astro-ekistics</em> is an open-access, hybrid journal that combines community contributions
                    with volunteer peer review. It serves as a living record of settlement science—covering
                    regenerative agriculture, closed-loop habitats, analogue settlements, and enabling technologies.
                  </p>
                  <p>
                    Its purpose is to make frontier research accessible, verifiable, and citable—ensuring knowledge
                    developed for life beyond Earth strengthens resilience on Earth as well.
                  </p>

                  {/* Badge line */}
                  <div style={{display:"flex", alignItems:"center", flexWrap:"wrap", gap:"14px", marginTop:"14px"}}>
                    <div style={{display:"flex", alignItems:"center", gap:"6px"}}>
                      <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Open_Access_logo_PLoS_white.svg"
                          alt="Open Access logo" style={{height:"22px"}}/>
                      <span>Open Access</span>
                    </div>
                    <div style={{display:"flex", alignItems:"center", gap:"6px"}}>
                      <img src="https://upload.wikimedia.org/wikipedia/commons/1/11/DOI_logo.svg"
                          alt="DOI logo" style={{height:"22px"}}/>
                      <span>DOI registered</span>
                    </div>
                    <div style={{display:"flex", alignItems:"center", gap:"6px"}}>
                      <img src="https://assets.crossref.org/logo/crossref-logo-landscape-200.svg"
                          alt="Crossref logo" style={{height:"22px"}}/>
                      <span>Crossref indexed</span>
                    </div>
                    <div style={{display:"flex", alignItems:"center", gap:"6px"}}>
                      <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/ORCID_iD.svg"
                          alt="ORCID logo" style={{height:"22px"}}/>
                      <span>ORCID linked</span>
                    </div>
                  </div>

                  {/* Etymology note */}
                  <p className="subtle" style={{marginTop:"14px", fontSize:".9rem", fontStyle:"italic"}}>
                    <strong>Etymology:</strong> “Ekistics” comes from the Greek <em>oikos</em>, meaning dwelling or
                    household, and refers to the science of human settlement. <em>Astro-ekistics</em> extends this
                    study to the frontier of space.
                  </p>
                </section>




                <section className="card" aria-labelledby="transparency">
                  <h2 id="transparency">Transparency & Licensing</h2>
                  <p>
                    Transparency is core to our work. All outputs remain in the commons:
                  </p>
                  <ul className="bullets">
                    <li>
                      <img src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" 
                          alt="CC BY-SA icon" style={{height:"20px",marginRight:"6px",verticalAlign:"middle"}}/>
                      Articles &amp; datasets — <strong>Creative Commons BY-SA</strong>
                    </li>
                    <li>
                      <img src="https://www.gnu.org/graphics/gplv3-127x51.png" 
                          alt="GNU GPL icon" style={{height:"20px",marginRight:"6px",verticalAlign:"middle"}}/>
                      Software — <strong>GNU GPL / AGPL</strong>
                    </li>
                    <li>
                     Hardware &amp; habitat designs — <strong>CERN OHL</strong>
                    </li>
                  </ul>
                  <p>
                    Strong copyleft keeps the work accessible, auditable, and reusable — preventing enclosure
                    and ensuring long-term public benefit.
                  </p>
                </section>

                <section className="card" aria-labelledby="governance">
                  <h2 id="governance">Funding &amp; Governance</h2>
                  <p>
                    Early support comes from mission-aligned aerospace partners and private donors, with future
                    growth driven by foundation and federal research grants. All resources are directed toward
                    open research and settlement development, not profit.
                  </p>
                  <p>
                    Governance follows a <strong>Principal Investigator model</strong>, where project leads manage
                    research budgets under board oversight. Budgets are reviewed and approved at the board level
                    to ensure accountability, transparency, and alignment with the Institute’s mission of
                    sustainable human settlement.
                  </p>
                </section>


                <section className="card" aria-labelledby="roadmap">
                  <h2 id="roadmap">Roadmap</h2>
                  <div className="timeline">
                    <TimelineItem title="Year 1">
                      Incorporation, 501(c)(3) filing, open database launched, journal framework established.
                    </TimelineItem>
                    <TimelineItem title="Year 2">
                      First journal issue, pilot projects initiated, analogue settlement design.
                    </TimelineItem>
                    <TimelineItem title="Year 3">
                      Settlement test modules constructed, first interns hosted, public workshop held.
                    </TimelineItem>
                    <TimelineItem title="Years 4–5">
                      Expanded analogue settlement with live-in research, university partnerships, pursuit of federal research grants.
                    </TimelineItem>
                  </div>
                </section>

                <section className="card" aria-labelledby="badge">
                  <h2 id="badge">Industry Partner Badge</h2>
                  <div style={{display:'grid', placeItems:'center', paddingTop:8, paddingBottom:4}}>
                    <PartnerBadge pct={pct}/>
                  </div>
                  <p style={{marginTop:10}}>
                  The Patron Seal of Astro-ekistics is awarded to companies that dedicate a verifiable portion of their annual charitable giving to the Institute of Astro-ekistics. Unlike symbolic endorsements, the Seal represents a documented, audited investment in humanity’s long-term survival.
                  Displaying the Seal signals that a company’s resources are actively advancing research in regenerative life-support systems, closed-loop habitats, and ecological resilience strategies. Each Seal is marked with the organization’s pledged percentage, ensuring transparency and accountability.
                  By participating, companies demonstrate leadership on the dual frontier: enabling self-sufficient human life beyond Earth while strengthening ecological sustainability on Earth today.
                  </p>
                </section>

                <section className="card" aria-labelledby="partners">
                  <h2 id="partners">Partners Registry</h2>
                  <p className="subtle">
                    Organizations displaying the Patron Seal of Astro-ekistics have dedicated a verifiable share of annual giving to this work.
                  </p>
                  <PartnerGrid/>
                </section>

              </main>

              <footer>© {new Date().getFullYear()} Institute of Astro-ekistics</footer>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
    </script>

    <!-- Starfield (parallax + twinkle) -->
    <script>
      (function(){
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');

        let w=0, h=0, dpr=1, stars=[];
        const layers = [
          { speed: 0.02, size: [0.4, 1.0], density: 0.00010, alpha: 0.5 }, // far
          { speed: 0.05, size: [0.8, 1.6], density: 0.00007, alpha: 0.7 }, // mid
          { speed: 0.10, size: [1.2, 2.2], density: 0.00005, alpha: 0.9 }  // near
        ];
        function rand(a,b){ return a + Math.random()*(b-a); }

        function resize(){
          const { innerWidth, innerHeight, devicePixelRatio } = window;
          dpr = Math.min(2, devicePixelRatio || 1);
          w = innerWidth; h = innerHeight;
          canvas.width = Math.floor(w * dpr);
          canvas.height = Math.floor(h * dpr);
          canvas.style.width = w + 'px';
          canvas.style.height = h + 'px';
          ctx.setTransform(dpr,0,0,dpr,0,0);
          initStars();
        }

        function initStars(){
          stars = [];
          layers.forEach((L, idx) => {
            const count = Math.ceil(w * h * L.density);
            for(let i=0;i<count;i++){
              stars.push({
                x: Math.random()*w,
                y: Math.random()*h,
                r: rand(L.size[0], L.size[1]),
                speed: L.speed * (1 + Math.random()*0.4),
                alpha: L.alpha * rand(0.7, 1.0),
                layer: idx,
                tw: Math.random()*Math.PI*2,
                twRate: rand(0.002, 0.006)
              });
            }
          });
        }

        let last=0, driftX=0.02, driftY=-0.005;
        function frame(ts){
          const dt = Math.min(32, ts - last || 16);
          last = ts;
          ctx.clearRect(0,0,w,h);

          const g = ctx.createRadialGradient(w*0.1, h*0.1, 0, w*0.1, h*0.1, Math.max(w,h));
          g.addColorStop(0, 'rgba(11,18,34,0.0)');
          g.addColorStop(1, 'rgba(4,7,15,0.12)');
          ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

          for(const s of stars){
            s.x += (s.speed + driftX) * dt;
            s.y += (driftY * (s.layer+1)) * dt;
            if(s.x > w) s.x -= w; if(s.x < 0) s.x += w;
            if(s.y > h) s.y -= h; if(s.y < 0) s.y += h;
            s.tw += s.twRate * dt; const twinkle = 0.75 + 0.25 * Math.sin(s.tw);
            ctx.globalAlpha = s.alpha * twinkle;
            ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
            ctx.fillStyle = '#e5ecff'; ctx.fill();
          }
          ctx.globalAlpha = 1;
          requestAnimationFrame(frame);
        }
        window.addEventListener('resize', resize, { passive:true });
        resize(); requestAnimationFrame(frame);
      })();
    </script>
  </body>
</html>
